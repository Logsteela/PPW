import{_ as De,u as Z,D as ye,g as p,r as G,x as Se,B as Ae,o as Ee,c as Re,av as c,aw as $e,am as Ne,q as Oe}from"./entry.CZWWdYvr.js";import{u as Me}from"./useHeldItem.BBfSrk06.js";import{p as F}from"./pokedexRef.BNpmZCKL.js";function We(){return{natures:[{id:1,name:"勤奋",describe:""},{id:2,name:"怕寂寞",describe:"攻擊＋,防禦－"},{id:3,name:"固执",describe:"攻擊＋,特攻－"},{id:4,name:"顽皮",describe:"攻擊＋,特防－"},{id:5,name:"勇敢",describe:"攻擊＋,速度－"},{id:6,name:"大胆",describe:"防禦＋,攻擊－"},{id:7,name:"坦率",describe:""},{id:8,name:"淘气",describe:"防禦＋,特攻－"},{id:9,name:"乐天",describe:"防禦＋,特防－"},{id:10,name:"悠闲",describe:"防禦＋,速度－"},{id:11,name:"内敛",describe:"特攻＋,攻擊－"},{id:12,name:"慢吞吞",describe:"特攻＋,防禦－"},{id:13,name:"害羞",describe:""},{id:14,name:"马虎",describe:"特攻＋,特防－"},{id:15,name:"冷静",describe:"特攻＋,速度－"},{id:16,name:"温和",describe:"特防＋,攻擊－"},{id:17,name:"温顺",describe:"特防＋,防禦－"},{id:18,name:"慎重",describe:"特防＋,特攻－"},{id:19,name:"浮躁",describe:""},{id:20,name:"自大",describe:"特防＋,速度－"},{id:21,name:"胆小",describe:"速度＋,攻擊－"},{id:22,name:"急躁",describe:"速度＋,防禦－"},{id:23,name:"爽朗",describe:"速度＋,特攻－"},{id:24,name:"天真",describe:"速度＋,特防－"},{id:25,name:"认真",describe:""}]}}const m=600,w=900,E=24,P=16,k=8,_=16,N=12,T=11,Le={__name:"PokeCard",props:{pokeData:{type:Object,required:!0}},setup(D){const l=D,h=Z(),{typeTwToEn:y,typeEnToTw:d,qualityEnToTw:b,getTypeColors:g}=ye(),{natures:S}=We(),{heldItems:j}=Me(),A=[{key:"hp",name:"生命"},{key:"attack",name:"攻擊"},{key:"defense",name:"防禦"},{key:"sAttack",name:"特攻"},{key:"sDefense",name:"特防"},{key:"speed",name:"速度"}],v=p(()=>{var e;return h.pokedex[(e=l.pokeData)==null?void 0:e.pokeId]||{stat:{}}}),O=p(()=>{var t;return(t=l.pokeData)!=null&&t.moves?l.pokeData.moves.split(",").map(o=>h.movedex[o]):[]}),M=p(()=>{var e;return(e=l.pokeData)!=null&&e.abilityId?h.abilitydex[l.pokeData.abilityId]:{}}),W=p(()=>{var e;return(e=l.pokeData)!=null&&e.natureId?S.find(t=>t.id===l.pokeData.natureId)||{}:{}}),L=p(()=>{var e;return(e=l.pokeData)!=null&&e.itemId?j.value.find(t=>t.id===l.pokeData.itemId)||{}:{}}),Q=p(()=>{var e;return(e=l.pokeData)!=null&&e.type?l.pokeData.type:"normal"}),C=p(()=>({hp:l.pokeData.hp,attack:l.pokeData.attack,defense:l.pokeData.defense,sAttack:l.pokeData.sAttack,sDefense:l.pokeData.sDefense,speed:l.pokeData.speed})),U=p(()=>{var e;return(e=l.pokeData)!=null&&e.description?l.pokeData.description:""}),Y=p(()=>{var e;return(e=l.pokeData)!=null&&e.creator?l.pokeData.creator:"寵物冒險助手"}),J=p(()=>v.value.zukanId?F.find(e=>e.zukan_id===v.value.zukanId&&e.zukan_sub_id===v.value.zukanSubId)||{}:{}),V=p(()=>v.value.img?v.value.img:`https://tw.portal-pokemon.com/play/resources/pokedex${J.value.file_name}`),q=Object.assign({"/assets/img/Nav-icon-0.svg":()=>c(()=>import("./Nav-icon-0.QG85ir-X.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-02.svg":()=>c(()=>import("./Nav-icon-02.hQDQBY0X.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-03.svg":()=>c(()=>import("./Nav-icon-03.CQz3Pv6V.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-04.svg":()=>c(()=>import("./Nav-icon-04.Bc1EgT9g.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-05.svg":()=>c(()=>import("./Nav-icon-05.BT7w0d7V.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-06.svg":()=>c(()=>import("./Nav-icon-06.BJ2Unse-.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-07.svg":()=>c(()=>import("./Nav-icon-07.1cgnGpYw.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-08.svg":()=>c(()=>import("./Nav-icon-08.00_WqVhD.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/Nav-icon-09.svg":()=>c(()=>import("./Nav-icon-09.BJxvvYkE.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/star.svg":()=>c(()=>import("./star.BP_NdBZn.js"),__vite__mapDeps([]),import.meta.url),"/assets/img/starY.svg":()=>c(()=>import("./starY.CyO3lBY7.js"),__vite__mapDeps([]),import.meta.url)}),B=G(""),z=G("");q["/assets/img/star.svg"]().then(e=>{B.value=e.default}),q["/assets/img/starY.svg"]().then(e=>{z.value=e.default});const K=p(()=>{var e;return(e=l.pokeData)!=null&&e.reincarnated?B.value:z.value}),H=p(()=>{var e;return(e=l.pokeData)!=null&&e.id?l.pokeData.id:""}),X=()=>{var u,I,$;const e=window.document.getElementById("card"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.textBaseline="top";let o=0;const a=20,s=e.width-T+1,n=e.height-T+1,i=(T-1)/2,r=(T-1)/2,f=Q.value;x({ctx:t,x:i,y:r,width:s,height:n,radius:a,type:f}),ee({ctx:t,x:0,y:0,width:s,height:n,radius:a}),o+=25,te({ctx:t,text:((u=l.pokeData)==null?void 0:u.title)||((I=v.value)==null?void 0:I.name),baseY:o}),oe({ctx:t,text:b[v.value.quality],baseY:o}),o+=55,ae({ctx:t,type:f,baseY:o}),o+=330,se({ctx:t,text:($=v.value)==null?void 0:$.name,baseY:o}),o+=50,ne({ctx:t,baseX:20,baseY:o}),o+=50,ie({ctx:t,baseX:20,baseY:o}),o+=50,ue({ctx:t,baseX:20,baseY:o}),Te({ctx:t,baseX:20+m/2,baseY:o}),o+=50,pe({ctx:t,baseX:20,baseY:o}),o+=50,ke({ctx:t,baseX:20,baseY:o}),o+=55,ge({ctx:t,baseX:20,baseY:o}),he({ctx:t,baseX:28,baseY:o}),we(t,m,w)},x=({ctx:e,x:t,y:o,width:a,height:s,radius:n,type:i})=>{e.save();const r=new Path2D;r.moveTo(t+n,o),r.lineTo(t+a-n,o),r.quadraticCurveTo(t+a,o,t+a,o+n),r.lineTo(t+a,o+s-n),r.quadraticCurveTo(t+a,o+s,t+a-n,o+s),r.lineTo(t+n,o+s),r.quadraticCurveTo(t,o+s,t,o+s-n),r.lineTo(t,o+n),r.quadraticCurveTo(t,o,t+n,o),r.closePath(),e.clip(r),e.fillStyle="#fff",e.fillRect(2,2,m-4,w-4);const f=g(i),u=e.createLinearGradient(0,0,m,w);u.addColorStop(1,"white"),u.addColorStop(.5,f.alphaColor),u.addColorStop(0,f.color),e.fillStyle=u,e.fillRect(2,2,m-4,w-4),e.restore()};function ee({ctx:e,x:t,y:o,width:a,height:s,radius:n}){e.save();const i=new Path2D;i.moveTo(t+n,o),i.lineTo(t+a-n,o),i.quadraticCurveTo(t+a,o,t+a,o+n),i.lineTo(t+a,o+s-n),i.quadraticCurveTo(t+a,o+s,t+a-n,o+s),i.lineTo(t+n,o+s),i.quadraticCurveTo(t,o+s,t,o+s-n),i.lineTo(t,o+n),i.quadraticCurveTo(t,o,t+n,o),i.closePath();const r=e.createLinearGradient(t,o,t+a,o+s);r.addColorStop(0,"gray"),r.addColorStop(.5,"white"),r.addColorStop(1,"gray"),e.translate((T-1)/2,(T-1)/2),e.lineWidth=T,e.strokeStyle=r,e.stroke(i),e.fill(),e.restore()}const te=({ctx:e,text:t,baseY:o})=>{e.save();const a="24px Arial";e.font=a,e.fillStyle="black",e.translate(20,o),e.fillText(t,0,0),e.restore()},oe=({ctx:e,text:t="",baseY:o})=>{e.save(),e.font="24px Arial",e.fillStyle="black";const a=e.measureText(t).width;e.translate(m-a-20,o),e.fillText(t,0,0),e.restore()},ae=({ctx:e,type:t,baseY:o})=>{e.save();const a=m/4;e.translate(m/2,o+a);const s=g(t);if(e.globalAlpha=.5,e.fillStyle="white",e.beginPath(),e.arc(0,0,a,0,2*Math.PI),e.fill(),e.restore(),e.save(),e.translate(m/2,o+a),e.strokeStyle="white",e.beginPath(),e.arc(0,0,a,0,2*Math.PI),e.stroke(),e.beginPath(),e.fill(),e.globalAlpha=1,e.restore(),Pe({ctx:e,baseX:40,baseY:o+280}),V.value){const n=new Image;n.src=V.value,n.onload=function(){e.save(),e.shadowColor=s.alphaColor,e.shadowBlur=50,e.translate(m/2-a,o),e.drawImage(n,0,0,2*a,2*a),e.restore()}}},se=({ctx:e,text:t="",baseY:o})=>{e.save(),e.font="24px Arial",e.fillStyle="black";const a=e.measureText(t).width;e.translate(m/2-a/2,o),e.fillText(t,0,0),e.restore()},ne=({ctx:e,baseX:t,baseY:o})=>{var n,i;const a="屬性",s="24px Arial";e.save(),e.font=s,e.fillStyle="black",e.fillText(a,t,o),e.restore(),(i=(n=v.value)==null?void 0:n.attribute)!=null&&i.length&&v.value.attribute.forEach((r,f)=>{const u=y[r];re(u,e,t+100+f*150,o)})},re=(e,t,o,a)=>{const s=d[e],n=g(e);t.save();const i=20;t.beginPath(),t.translate(o,a+i/2),t.arc(0,0,i,0,2*Math.PI),t.fillStyle=n.color,t.fill(),t.restore();const r=new Image;r.src=`/icons/${e}.svg`,r.onload=function(){t.save(),t.translate(o-i+5,a-i/2+5),t.drawImage(r,0,0,30,30),t.restore()},t.save();const f=s,u="18px Arial";t.font=u,t.fillStyle="black",t.fillText(f,o+40,a),t.restore()},ie=({ctx:e,baseX:t,baseY:o})=>{const a="招式",s="24px Arial";e.save(),e.font=s,e.fillStyle="black",e.fillText(a,t,o),e.restore();let n=0;for(let i=0;i<O.value.length;i++)n+=le(O.value[i],e,t+80+n,o)+4},le=(e,t,o,a)=>{const s=_+k*2+4+N,n=R(t,e.name,_),i=R(t,`${e.type} / ${e.category} / PP${e.pp}`,N),f=Math.max(n,i)+k*2;de(e,t,o,a-(s-24)/2,f,s),t.save();const u=e.name,I=`${_}px Arial`;return t.translate(o+k,a+k-(s-24)/2),t.font=I,t.fillStyle="black",t.fillText(u,0,0),t.restore(),fe(e,t,o+k,a+k+_+4-(s-24)/2),f},de=(e,t,o,a,s,n)=>{t.save();const i=y[e.type],r=g(i);t.translate(o,a),t.fillStyle=r.alphaColor,t.fillRect(0,0,s,n),t.restore()},fe=(e,t,o,a)=>{t.save();const s=`${e.type} / ${e.category} / PP${e.pp}`,n=`${N}px Arial`;t.translate(o,a),t.font=n,t.fillStyle="black",t.fillText(s,0,0),t.restore()},R=(e,t,o)=>{e.save(),e.font=`${o}px Arial`;const a=e.measureText(t).width;return e.restore(),a},ue=({ctx:e,baseX:t,baseY:o})=>{const a="特性",s="24px Arial";e.save(),e.font=s,e.fillStyle="black",e.fillText(a,t,o),e.restore(),M.value.id&&me(M.value,e,t+80,o)},me=(e,t,o,a)=>{t.save();const s=e.name,n=`${_}px Arial`;t.translate(o,a+(E-P)/2),t.font=n,t.fillStyle="black",t.fillText(s,0,0),t.restore()},pe=({ctx:e,baseX:t,baseY:o})=>{const a="性格",s="24px Arial";e.save(),e.font=s,e.fillStyle="black",e.fillText(a,t,o),e.restore(),W.value.id&&ce(W.value,e,t+80,o)},ce=(e,t,o,a)=>{const n=R(t,e.name,_)+k*2;t.save();const i=e.name,r=`${_}px Arial`;t.translate(o,a+4),t.font=r,t.fillStyle="black",t.fillText(i,0,0),t.restore(),ve(t,e,o+n,a)},ve=(e,t,o,a)=>{e.save();const s=`(${t.describe})`,n=`${P}px Arial`;e.translate(o,a+(E-P)/2),e.font=n,e.fillStyle="black",e.fillText(s,0,0),e.restore()},ke=({ctx:e,baseX:t,baseY:o})=>{const a="攜帶物",s=`${E}px Arial`;e.save(),e.font=s,e.fillStyle="black",e.fillText(a,t,o),e.restore(),L.value.id&&_e(e,L.value,t+120,o)},_e=(e,t,o,a)=>{e.save(),e.beginPath(),e.translate(o,a+24/2),e.arc(0,0,24,0,2*Math.PI),e.fillStyle="white",e.fill(),e.beginPath(),e.restore();const n=new Image;n.src=`/icons/heldItem/${t.id}.png`,n.onload=function(){e.save(),e.translate(o-24+6,a-24/2+6),e.drawImage(n,0,0,36,36),e.restore()},e.save();const i=t.name,r=`${P}px Arial`;e.translate(o+40,a+(E-P)/2),e.font=r,e.fillStyle="black",e.fillText(i,0,0),e.restore()},Te=({ctx:e,baseX:t,baseY:o})=>{const a="努力值",s="24px Arial";e.save(),e.font=s,e.fillStyle="black",e.fillText(a,t,o),e.restore();let n=0,i=0;for(let r=0;r<A.length;r++)if(C.value[A[r].key]>0){const f={name:A[r].name,value:C.value[A[r].key]};be(e,t+90+n*80,o+3+i*30,f),n++,n>1&&(n=0,i++)}},be=(e,t,o,{name:a,value:s})=>{e.save();const n=`${a}: ${s}`,i="18px Arial";e.translate(t,o),e.font=i,e.fillStyle="black",e.fillText(n,0,0),e.restore()},ge=({ctx:e,baseX:t,baseY:o})=>{e.save(),e.globalAlpha=.5,e.beginPath();const a=t,s=o-20,n=560,i=170,r=10;e.moveTo(a+r,s),e.lineTo(a+n-r,s),e.arcTo(a+n,s,a+n,s+r,r),e.lineTo(a+n,s+i-r),e.arcTo(a+n,s+i,a+n-r,s+i,r),e.lineTo(a+r,s+i),e.arcTo(a,s+i,a,s+i-r,r),e.lineTo(a,s+r),e.arcTo(a,s,a+r,s,r),e.fillStyle="white",e.fill(),e.lineWidth=2,e.strokeStyle="black",e.stroke(),e.beginPath(),e.stroke(),e.globalAlpha=1,e.restore()},he=({ctx:e,baseX:t,baseY:o})=>{e.save();const a="18px Arial";e.font=a,e.fillStyle="black",Ie(e,U.value,t,o,m-56,30),e.restore()},Ie=(e,t,o,a,s,n)=>{const i=t.split("");let r="";for(let f=0;f<i.length;f++){const u=r+i[f];if(e.measureText(u).width>s&&f>0){if(e.fillText(r,o,a),r=i[f],a+=n,a>w-50)return}else r=u}e.fillText(r,o,a)},we=(e,t,o)=>{e.save();const a=20;let s="";H.value&&(s=`No. ${H.value}`);const n=`${s} created by ${Y.value}`,i="16px Arial";e.font=i,e.fillStyle="black";const r=e.measureText(n).width;e.fillText(n,t-r-a,o-8-a),e.restore()},Pe=({ctx:e,baseX:t,baseY:o})=>{const a=new Image;a.src=K.value,a.onload=function(){e.save(),e.translate(m/2,o-m/4),e.rotate(-45*Math.PI/180);for(let s=0;s<6;s++)e.rotate(15*Math.PI/180),e.drawImage(a,0,m/4-2,30,30);e.restore()}};return Se(()=>{}),Ae(()=>l.pokeData,()=>{X()},{deep:!0}),(e,t)=>(Ee(),Re("canvas",{id:"card",width:m,height:"900",class:"h-full w-full"}))}},ze=De(Le,[["__scopeId","data-v-0e4ff719"]]),{getPokeCards:Ce}=Oe(),He=$e({id:"usePokeCardStore",state:()=>({pokeCards:[],needRefresh:!0}),getters:{},actions:{async actionGetPokeCards(D){if(!this.needRefresh)return;const{data:l}=await Ce(D),h=Z(),y=Ne(l.value);return this.pokeCards=y.map(d=>{const b=h.pokedex[d.p],g=F.find(S=>S.zukan_id===b.zukanId&&S.zukan_sub_id===b.zukanSubId)||{};return{id:d.id,title:d.t,pokeId:d.p,poke:b,moves:d.m,natureId:d.n,itemId:d.i,abilityId:d.a,hp:d.b[0],attack:d.b[1],defense:d.b[2],sAttack:d.b[3],sDefense:d.b[4],speed:d.b[5],description:d.d,creator:d.c||"寵物冒險助手",createTime:d.ct,type:d.ty,reincarnated:d.r,img:b.img||`https://tw.portal-pokemon.com/play/resources/pokedex${g.file_name}`}}),this.needRefresh=!1,l}}});export{ze as _,We as a,He as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
